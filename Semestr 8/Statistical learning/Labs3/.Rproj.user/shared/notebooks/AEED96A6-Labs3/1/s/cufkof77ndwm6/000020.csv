"0","sigma = 1"
"0","n = 1000"
"0","p = 950"
"0","X = randortho(n, type=""orthonormal"")"
"0","X = X[1:n, 1:p]"
"0","beta = c(rep(0, p))"
"0","non_zero_beta_val = 3.5"
"0","ks = c(20, 100, 200)"
"0",""
"0","names_of_columns = c(""k"", ""emp bias OLS b3.5"", ""emp bias OLS b0"", ""emp var OLS b3.5"", ""emp var OLS b0"", ""emp mse OLS b3.5"", ""emp mse OLS b0"","
"0","                     ""emp bias Ridge b3.5"", ""emp bias Ridge b0"", ""emp var Ridge b3.5"", ""emp var Ridge b0"", ""emp mse Ridge b3.5"", ""emp mse Ridge b0"")"
"0","task1 = data.frame(matrix(ncol=length(names_of_columns), nrow=0))"
"0","colnames(task1) = names_of_columns"
"0",""
"0","n_experiments = 1000"
"0","for(k in ks){"
"0","    beta[1:k] = non_zero_beta_val"
"0","    experiment_betas_ridge = matrix(0, p, n_experiments)"
"0","    experiment_bias_nonzero_ridge = matrix(0, n_experiments)"
"0","    experiment_bias_zero_ridge = matrix(0, n_experiments)"
"0","    experiment_mse_nonzero_ridge = matrix(0, n_experiments)"
"0","    experiment_mse_zero_ridge = matrix(0, n_experiments)"
"0","    "
"0","    experiment_betas_ols = matrix(0, p, n_experiments)"
"0","    experiment_bias_nonzero_ols = matrix(0, n_experiments)"
"0","    experiment_bias_zero_ols = matrix(0, n_experiments)"
"0","    experiment_mse_nonzero_ols = matrix(0, n_experiments)"
"0","    experiment_mse_zero_ols = matrix(0, n_experiments)"
"0","    for(i_exp in 1:n_experiments){"
"0","        eps = rnorm(1000)"
"0","        optimal_lambda = p*sigma**2 / sum(abs(beta)**2)"
"0","        beta_hat_ols = beta + t(X) %*% eps"
"0","        beta_hat_ridge = beta_hat_ols / (1+optimal_lambda)"
"0","        "
"0","        experiment_betas_ridge[1:p, i_exp] = beta_hat_ridge"
"0","        experiment_bias_nonzero_ridge[i_exp] = mean(beta_hat_ridge[1:k] - non_zero_beta_val)"
"0","        experiment_bias_zero_ridge[i_exp] = mean(beta_hat_ridge[(k+1):p] - 0)"
"0","        experiment_mse_nonzero_ridge[i_exp] = mean((beta_hat_ridge[1:k] - non_zero_beta_val)^2)"
"0","        experiment_mse_zero_ridge[i_exp] = mean((beta_hat_ridge[(k+1):p] - 0)^2)"
"0","        "
"0","        experiment_betas_ols[1:p, i_exp] = beta_hat_ols"
"0","        experiment_bias_nonzero_ols[i_exp] = mean(beta_hat_ols[1:k] - non_zero_beta_val)"
"0","        experiment_bias_zero_ols[i_exp] = mean(beta_hat_ols[(k+1):p] - 0)"
"0","        experiment_mse_nonzero_ols[i_exp] = mean((beta_hat_ols[1:k] - non_zero_beta_val)^2)"
"0","        experiment_mse_zero_ols[i_exp] = mean((beta_hat_ols[(k+1):p] - 0)^2)"
"0","    }"
"0","    emp_bias_nonzero_ridge = mean(experiment_bias_nonzero_ridge)"
"0","    emp_bias_zero_ridge = mean(experiment_bias_zero_ridge)"
"0","    emp_mse_nonzero_ridge = mean(experiment_mse_nonzero_ridge)"
"0","    emp_mse_zero_ridge = mean(experiment_mse_zero_ridge)"
"0","    emp_variance_nonzero_ridge = mean(apply(experiment_betas_ridge[1:k, ], 1, var))"
"0","    emp_variance_zero_ridge = mean(apply(experiment_betas_ridge[(k+1):p, ], 1, var))"
"0",""
"0","    emp_bias_nonzero_ols = mean(experiment_bias_nonzero_ols)"
"0","    emp_bias_zero_ols = mean(experiment_bias_zero_ols)"
"0","    emp_mse_nonzero_ols = mean(experiment_mse_nonzero_ols)"
"0","    emp_mse_zero_ols = mean(experiment_mse_zero_ols)"
"0","    emp_variance_nonzero_ols = mean(apply(experiment_betas_ols[1:k, ], 1, var))"
"0","    emp_variance_zero_ols = mean(apply(experiment_betas_ols[(k+1):p, ], 1, var))"
"0","    "
"0","    task1[nrow(task1) + 1,] = c(k, emp_bias_nonzero_ols, emp_bias_zero_ols, emp_variance_nonzero_ols, emp_variance_zero_ols, emp_mse_nonzero_ols, emp_mse_zero_ols, emp_bias_nonzero_ridge, emp_bias_zero_ridge, emp_variance_nonzero_ridge, emp_variance_zero_ridge, emp_mse_nonzero_ridge, emp_mse_zero_ridge)"
"0","}"
"0","task1"
